{
  "hash": "51176ee28e993488e45040244d77e718",
  "result": {
    "markdown": "\n\n\n# Los Datos De Vivienda De Ames {#sec-ames}\n\nEn este capítulo, presentaremos el conjunto de datos de vivienda de Ames [@ames], que usaremos en ejemplos de modelado a lo largo de este libro. El análisis exploratorio de datos, como el que analizamos en este capítulo, es un primer paso importante para construir un modelo confiable. El conjunto de datos contiene información sobre las propiedades 2,930 en Ames, Iowa, incluidas columnas relacionadas con:\n\n-   Características de la casa (dormitorios, garaje, chimenea, piscina, porche, etc.)\n-   ubicación (barrio)\n-   información del lote (zonificación, forma, tamaño, etc.)\n-   calificaciones de condición y calidad\n-   precio de venta\n\n::: rmdnote\nNuestro objetivo de modelado es predecir el precio de venta de una casa en función de otra información que tenemos, como sus características y ubicación.\n:::\n\nLos datos brutos de vivienda se proporcionan en @ames, pero en nuestros análisis de este libro utilizamos una versión transformada disponible en el paquete <span class=\"pkg\">modeldata</span>. Esta versión tiene varios cambios y mejoras en los datos.[^04-ames-1] Por ejemplo, se han determinado los valores de longitud y latitud para cada propiedad. Además, algunas columnas se modificaron para que estuvieran más preparadas para el análisis. Por ejemplo:\n\n[^04-ames-1]: Para obtener una descripción completa de las diferencias, consulte <https://github.com/topepo/AmesHousing/blob/master/R/make_ames.R>.\n\n-   En los datos sin procesar, si una casa no tenía una característica particular, se codificaba implícitamente como faltante. Por ejemplo, 2,732 las propiedades no tenían callejón. En lugar de dejarlos como faltantes, se volvieron a etiquetar en la versión transformada para indicar que no había ningún callejón disponible.\n\n-   Los predictores categóricos se convirtieron al tipo de datos de factor de R. Si bien tanto tidyverse como base R han dejado de importar datos como factores de forma predeterminada, este tipo de datos es un mejor enfoque para almacenar datos cualitativos para modelado que cadenas simples.\n\n-   Eliminamos un conjunto de descriptores de calidad para cada casa, ya que se parecen más a resultados que a predictores.\n\nPara cargar los datos:\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/ames-load_88500dc61e078c243e48280eb15a2e51'}\n\n```{.r .cell-code}\nlibrary(modeldata) # Esto también lo carga el paquete tidymodels.\ndata(ames)\n\n# o, en una línea:\ndata(ames, package = \"modeldata\")\n\ndim(ames)\n## [1] 2930   74\n```\n:::\n\n\n## Explorando Las Características De Las Casas En Ames {#sec-exploring-features-of-homes-in-ames}\n\nComencemos nuestro análisis exploratorio de datos centrándonos en el resultado que queremos predecir: el último precio de venta de la casa (en USD). Podemos crear un histograma para ver la distribución de los precios de venta en @fig-ames-sale-price-hist.\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/ames-sale-price-code_878a12e1d5ff9a200f2579debc7604d8'}\n\n```{.r .cell-code}\nlibrary(tidymodels)\ntidymodels_prefer()\n\nggplot(ames, aes(x = Sale_Price)) + \n  geom_histogram(bins = 50, col= \"white\")\n```\n:::\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/fig-ames-sale-price-hist_37ae5c259349def823971633f6d21d26'}\n::: {.cell-output-display}\n![Precios de venta de casas en Ames (Iowa)](04-ames_files/figure-html/fig-ames-sale-price-hist-1.png){#fig-ames-sale-price-hist fig-align='center' fig-alt='Un histograma de los precios de venta de casas en Ames, Iowa. La distribución tiene una cola larga derecha.' width=100%}\n:::\n:::\n\n\nEste gráfico nos muestra que los datos están sesgados hacia la derecha; Hay más casas baratas que caras. El precio de venta medio fue \\$160,000, y la casa más cara era \\$755,000. Al modelar este resultado, se puede argumentar con fuerza que el precio debe transformarse logarítmicamente. Las ventajas de este tipo de transformación son que no se pronosticarían casas con precios de venta negativos y que los errores al predecir casas caras no tendrán una influencia indebida en el modelo. Además, desde una perspectiva estadística, una transformada logarítmica también puede estabilizar la varianza de una manera que haga que la inferencia sea más legítima. Podemos usar pasos similares para visualizar ahora los datos transformados, que se muestran en @fig-ames-log-sale-price-hist.\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/ames-log-sale-price-code_3f1fef4d5ce9475c3c82c9ca64ddecbc'}\n\n```{.r .cell-code}\nggplot(ames, aes(x = Sale_Price)) + \n  geom_histogram(bins = 50, col= \"white\") +\n  scale_x_log10()\n```\n:::\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/fig-ames-log-sale-price-hist_b59700a61f728174b3f80d76fef64a6f'}\n::: {.cell-output-display}\n![Precios de venta de casas en Ames, Iowa después de una transformación logarítmica (base 10)](04-ames_files/figure-html/fig-ames-log-sale-price-hist-1.png){#fig-ames-log-sale-price-hist fig-align='center' fig-alt='Un histograma de los precios de venta de casas en Ames, Iowa, después de una transformación logarítmica (base 10). La distribución, si bien no es perfectamente simétrica, muestra mucha menos asimetría.' width=100%}\n:::\n:::\n\n\nSi bien no es perfecto, esto probablemente dará como resultado mejores modelos que el uso de datos no transformados, por las razones que acabamos de describir.\n\n::: rmdwarning\nLas desventajas de transformar el resultado se relacionan principalmente con la interpretación de los resultados del modelo.\n:::\n\nLas unidades de los coeficientes del modelo podrían ser más difíciles de interpretar, al igual que las medidas de desempeño. Por ejemplo, el error cuadrático medio (RMSE) es una métrica de rendimiento común que se utiliza en los modelos de regresión. Utiliza la diferencia entre los valores observados y predichos en sus cálculos. Si el precio de venta está en la escala logarítmica, estas diferencias (es decir, los residuos) también están en la escala logarítmica. Puede resultar difícil comprender la calidad de un modelo cuyo RMSE es 0,15 en una escala logarítmica de este tipo.\n\nA pesar de estos inconvenientes, los modelos utilizados en este libro utilizan la transformación logarítmica para este resultado. *A partir de este momento*, la columna de resultados está preregistrada en el marco de datos `ames`:\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/ames-log_b50d26465f1320a570a9304c96000fc7'}\n\n```{.r .cell-code}\names <- ames %>% mutate(Sale_Price = log10(Sale_Price))\n```\n:::\n\n\nOtro aspecto importante de estos datos para nuestro modelado es su ubicación geográfica. Esta información espacial está contenida en los datos de dos maneras: una etiqueta cualitativa de `Vecindario` y datos cuantitativos de longitud y latitud. Para visualizar la información espacial, usemos ambos juntos para trazar los datos en un mapa en @fig-ames-map.\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/fig-ames-map_79e12e17abe741e185a2d4053a225cb5'}\n::: {.cell-output-display}\n![Barrios en Ames, IA](premade/ames.png){#fig-ames-map fig-align='center' fig-alt='Un diagrama de dispersión de la ubicación de las casas en Ames superpuesto a un mapa de calles. Hay un área importante en el centro del mapa donde no se vendieron casas.' width=100%}\n:::\n:::\n\n\nPodemos ver algunos patrones notables. Primero, hay un vacío de puntos de datos en el centro de Ames. Esto corresponde al campus de la Universidad Estatal de Iowa donde no hay casas residenciales. En segundo lugar, si bien hay varios barrios adyacentes, otros están geográficamente aislados. Por ejemplo, como muestra @fig-ames-timberland, Timberland está ubicado aparte de casi todos los demás vecindarios.\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/fig-ames-timberland_0e9fae09342383f1dbd56b2377f2ca52'}\n::: {.cell-output-display}\n![Ubicaciones de casas en Timberland](premade/timberland.png){#fig-ames-timberland fig-align='center' fig-alt='Un diagrama de dispersión de la ubicación de las casas en Timberland, ubicada en la parte sur de Ames.' width=80%}\n:::\n:::\n\n\n@fig-ames-mitchell visualiza cómo el barrio de Meadow Village en el suroeste de Ames es como una isla de propiedades dentro del mar de propiedades que conforman el barrio de Mitchell.\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/fig-ames-mitchell_3c46bd0efd5948f733c943672330a5b5'}\n::: {.cell-output-display}\n![Ubicación de las casas en Meadow Village y Mitchell](premade/mitchell.png){#fig-ames-mitchell fig-align='center' fig-alt='Un diagrama de dispersión de la ubicación de las casas en Meadow Village y Mitchell. La pequeña cantidad de propiedades de Meadow Village están incluidas dentro de las etiquetadas como en Mitchell.' width=60%}\n:::\n:::\n\n\nUna inspección detallada del mapa también muestra que las etiquetas de los barrios no son totalmente fiables. Por ejemplo, @fig-ames-northridge muestra que algunas propiedades etiquetadas como ubicadas en Northridge están rodeadas de casas en el vecindario adyacente de Somerset.\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/fig-ames-northridge_722b262d7f7e87f8596a80c34822f864'}\n::: {.cell-output-display}\n![Ubicación de las casas en Somerset y Northridge](premade/northridge.png){#fig-ames-northridge fig-align='center' fig-alt='Un diagrama de dispersión de la ubicación de viviendas en Somerset y Northridge. Hay algunas casas en Somerset mezcladas en la periferia de Northridge (y viceversa).' width=90%}\n:::\n:::\n\n\nAdemás, hay diez casas aisladas etiquetadas como en Crawford que, como puedes ver en @fig-ames-crawford, no están cerca de la mayoría de las otras casas en ese vecindario.\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/fig-ames-crawford_1a78ae21f7a04694e3a9a3693d9ec81d'}\n::: {.cell-output-display}\n![Ubicación de las casas en Crawford](premade/crawford.png){#fig-ames-crawford fig-align='center' fig-alt='Un diagrama de dispersión de la ubicación de las casas en Crawford. Hay un gran grupo de casas al oeste de un pequeño grupo separado de propiedades también etiquetadas como Crawford.' width=80%}\n:::\n:::\n\n\nTambién es notable el vecindario del \"Departamento de Transporte de Iowa (DOT) y Ferrocarriles\" adyacente a la carretera principal en el lado este de Ames, que se muestra en @fig-ames-dot-rr. Hay varios grupos de viviendas dentro de este vecindario, así como algunos valores atípicos longitudinales; las dos casas más al este están aisladas de las otras ubicaciones.\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/fig-ames-dot-rr_cd26a54fe1656613a91bb192ecacedc1'}\n::: {.cell-output-display}\n![Casas etiquetadas como Departamento de Transporte de Iowa (DOT) y Ferrocarril](premade/dot_rr.png){#fig-ames-dot-rr fig-align='center' fig-alt='Un diagrama de dispersión de la ubicación de las casas etiquetadas como \\'Departamento de Transporte (DOT) y Ferrocarriles de Iowa\\'. La distribución de longitud está sesgada hacia la derecha con algunas propiedades periféricas.' width=100%}\n:::\n:::\n\n\nComo se describe en el [Capítulo @sec-software-modeling], es fundamental realizar un análisis de datos exploratorio antes de comenzar cualquier modelado. Estos datos sobre vivienda tienen características que presentan desafíos interesantes sobre cómo se deben procesar y modelar los datos. Describimos muchos de estos en capítulos posteriores. Algunas preguntas básicas que podrían examinarse durante esta etapa exploratoria incluyen:\n\n-   ¿Hay algo extraño o notable en las distribuciones de los predictores individuales? ¿Hay mucha asimetría o distribuciones patológicas?\n\n-   ¿Existen altas correlaciones entre los predictores? Por ejemplo, existen múltiples predictores relacionados con el tamaño de la casa. ¿Algunas son redundantes?\n\n-   ¿Existen asociaciones entre los predictores y los resultados?\n\nMuchas de estas preguntas serán revisadas a medida que estos datos se utilicen a lo largo de este libro.\n\n## Resumen Del Capítulo {#sec-ames-summary}\n\nEste capítulo presentó el conjunto de datos de vivienda de Ames e investigó algunas de sus características. Este conjunto de datos se utilizará en capítulos posteriores para demostrar la sintaxis de tidymodels. El análisis de datos exploratorios como este es un componente esencial de cualquier proyecto de modelado; EDA descubre información que contribuye a una mejor práctica de modelado.\n\nEl código importante para preparar el conjunto de datos de Ames que llevaremos a los capítulos siguientes es:\n\n\n::: {.cell layout-align=\"center\" hash='04-ames_cache/html/ames-summary_a9cb3c587171de42fe915ccc9592d82e'}\n\n```{.r .cell-code}\nlibrary(tidymodels)\ndata(ames)\names <- ames %>% mutate(Sale_Price = log10(Sale_Price))\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}